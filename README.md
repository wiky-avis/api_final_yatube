# API Yatube

## Описание:
Реализован пользовательский функционал дающий возможность пользоваться приложением не посещая сайт:
*	Просматривать, создавать новые, удалять и изменять посты.
*	Просматривать и создавать группы.
*	Комментировать, смотреть, удалять и обновлять комментарии.
*	Подписываться на пользователя.
*	Фильтровать по полям.

Документация к API доступна по адресу http://localhost:8000/redoc/

## Установка:
Клонируем репозиторий на локальную машину:
```$ git clone https://github.com/netshy/api_final_yatube.git```

Создаем виртуальное окружение:
```$ python -m venv venv```

Устанавливаем зависимости:
```$ pip install -r requirements.txt```

Создание и применение миграций:
```$ python manage.py makemigrations``` и ```$ python manage.py migrate```

Создаем суперпользователя:
```$ python manage.py createsuperuser --email admin@test.com --username admin```

Запускаем django сервер:
```$ python manage.py runserver```

## Примеры запросов к API:
Для формирования ответов и запросов будет использована программа [Postman](https://www.postman.com/downloads/).

## Получаем токен
Отправляем POST-запрос на адрес `http://localhost:8000/api/v1/token/`, переходим на вкладку `Body` и передаем 2 поля в `form-data`.
1.	username - указываем имя пользователя.
1.	password - указываем пароль пользователя.
Нажимаем кнопку `Send`. 
API вернет JWT-токен:
*	Токен ```refresh``` пригодится для обновления токена. Чтобы обновить токен (например, в случае компрометации), отправьте POST-запрос на тот же адрес, а в поле refresh передайте refresh-токен (если повторно передать логин и пароль — токен не будет обновлён: вам просто вернётся прежний токен).
*	Токен ```access``` будет использоваться для аунтефикации пользователя.

При отправке запроса передавайте токен в заголовке `Authorization: Bearer <токен>`.

Слово Bearer здесь заменяет слово Token и означает, что за ним следует сам токен.

Дополнительные настройки можно найти в документации: например, параметр ACCESS_TOKEN_LIFETIME позволит настроить время жизни токена. В проекте жизнь токена по умолчанию 1 год.
 
![GitHub Logo](/images/запрос-токена.jpg)

## Получаем список всех постов
Передаем GET-запрос `http://127.0.0.1:8000/api/v1/posts/`  и нажимаем кнопку `Send`
![GitHub Logo](/images/список-всех-постов.jpg)

## Создаем новый пост
Копируем токен access, переходим на вкладку `Authorization`, в `Type` выбираем `Bearer  Token`, в поле `Token` вставляем наш токен. Передаем POST-запрос `http://127.0.0.1:8000/api/v1/posts/`,  переходим на вкладку `Body` и передаем 1 поле в `form-data` и нажимаем кнопку `Send`:
*	**Обязательное поле: text**

![GitHub Logo](/images/созание-поста.jpg)

## Фильтруем посты по номеру группы
Передаем GET-запрос `http://127.0.0.1:8000/api/v1/posts/`, во вкладке `params` указываем поле `group` со значением `1`.
![GitHub Logo](/images/фильтруем-посты-по-группе-1.jpg)

## Фильтруем посты по автору
Передаем GET-запрос `http://127.0.0.1:8000/api/v1/posts/`, во вкладке `params` указываем поле `author` со значением `1`.
![GitHub Logo](/images/фильтр-по-авторам.jpg)
