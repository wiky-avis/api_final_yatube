# REST API для проекта Yatube.

## Описание:
Реализован пользовательский функционал дающий возможность пользоваться приложением не посещая сайт:
*	Просматривать, создавать новые, удалять и изменять посты.
*	Просматривать и создавать группы.
*	Комментировать, смотреть и удалять комментарии.
*	Подписываться на пользователя.
*	Фильтровать по полям.

Документация к API доступна по адресу http://localhost:8000/redoc/

## Установка:
Клонируем репозиторий на локальную машину:
```$ git clone https://github.com/netshy/api_final_yatube.git```

Создаем виртуальное окружение:
```$ python -m venv venv```

Устанавливаем зависимости:
```$ pip install -r requirements.txt```

Создание и применение миграций:
```$ python manage.py makemigrations``` и ```$ python manage.py migrate```

Создаем суперпользователя:
```$ python manage.py createsuperuser --email admin@test.com --username admin```

Запускаем django сервер:
```$ python manage.py runserver```

## Примеры запросов к API:
Для формирования ответов и запросов будет использовано расширение для VS Code [REST Client](https://marketplace.visualstudio.com/items?itemName=humao.rest-client).

Расширение REST Client позволяет прямо из VS Code отправлять HTTP-запросы, и в этом же интерфейсе просматривать ответы на них. Установка расширения стандартна: в строке поиска панели "Extensions" нужно ввести название плагина "REST Client" и нажать кнопку "Install" («Установить»).

Запросы в REST Client нужно сохранять в файле с расширением .http. После установки создайте в VS Code новый файл (например requests.http). Запросы в файле отделяются друг от друга строками, содержащими три символа #.

Для отправки любого запроса нажмите над ним ссылку "SendRequest". В правой части экрана вы увидите ответ сервера:

![GitHub Logo](/images/окно_вскод.jpg)

## Получаем токен
Отправляем POST-запрос на адрес `http://localhost:8000/api/v1/token/`.
1.	username - указываем имя пользователя.
1.	password - указываем пароль пользователя.

![GitHub Logo](/images/токен.jpg)
API вернет JWT-токен:
*	Токен ```refresh``` пригодится для обновления токена. Чтобы обновить токен (например, в случае компрометации), отправьте POST-запрос на тот же адрес, а в поле refresh передайте refresh-токен (если повторно передать логин и пароль — токен не будет обновлён: вам просто вернётся прежний токен).
*	Токен ```access``` будет использоваться для аунтефикации пользователя.

При отправке запроса передавайте токен в заголовке `Authorization: Bearer <токен>`.

Слово Bearer здесь заменяет слово Token и означает, что за ним следует сам токен.

Дополнительные настройки можно найти в документации: например, параметр ACCESS_TOKEN_LIFETIME позволит настроить время жизни токена. В проекте жизнь токена по умолчанию 1 год.

## Получаем список всех постов
Передаем GET-запрос `http://127.0.0.1:8000/api/v1/posts/`

![GitHub Logo](/images/посты.jpg)

## Создаем новый пост
Копируем токен access. Передаем POST-запрос `http://127.0.0.1:8000/api/v1/posts/`:
*	**Обязательное поле: text**

![GitHub Logo](/images/новый_пост.jpg)

## Фильтруем посты по номеру группы
Передаем GET-запрос `http://localhost:8000/api/v1/posts/?group=1`.

![GitHub Logo](/images/фильтр_по_группе.jpg)
